--- original/net/minecraft/client/gui/GuiNewChat.java
+++ changed/net/minecraft/client/gui/GuiNewChat.java
@@ -1,5 +1,8 @@
 package net.minecraft.client.gui;
 
+import cc.hyperium.config.Settings;
+import cc.hyperium.event.EventBus;
+import cc.hyperium.event.network.chat.ChatEvent;
 import com.google.common.collect.Lists;
 import java.util.Iterator;
 import java.util.List;
@@ -71,7 +74,7 @@
                      if(l1 > 3) {
                         int i2 = 0;
                         int j2 = -i1 * 9;
-                        drawRect(i2, j2 - 9, i2 + l + 4, j2, l1 / 2 << 24);
+                        if (!Settings.FASTCHAT) drawRect(i2, j2 - 9, i2 + l + 4, j2, l1 / 2 << 24);
                         String s = chatline.getChatComponent().getFormattedText();
                         GlStateManager.enableBlend();
                         this.mc.fontRendererObj.drawStringWithShadow(s, (float)i2, (float)(j2 - 8), 16777215 + (l1 << 24));
@@ -112,6 +115,17 @@
    }
 
    public void printChatMessage(IChatComponent chatComponent) {
+      ChatEvent event = new ChatEvent(chatComponent);
+      EventBus.INSTANCE.post(event);
+      if (event.isCancelled()) {
+         return;
+      } else {
+         if (event.getChat() != chatComponent) {
+            printChatMessageWithOptionalDeletion(event.getChat(), 0);
+            return;
+         }
+      }
+
       this.printChatMessageWithOptionalDeletion(chatComponent, 0);
    }
 
@@ -141,14 +155,14 @@
          this.drawnChatLines.add(0, new ChatLine(updateCounter, ichatcomponent, chatLineId));
       }
 
-      while(this.drawnChatLines.size() > 100) {
+      while(this.drawnChatLines.size() > 500) {
          this.drawnChatLines.remove(this.drawnChatLines.size() - 1);
       }
 
       if(!displayOnly) {
          this.chatLines.add(0, new ChatLine(updateCounter, chatComponent, chatLineId));
 
-         while(this.chatLines.size() > 100) {
+         while(this.chatLines.size() > 500) {
             this.chatLines.remove(this.chatLines.size() - 1);
          }
       }
@@ -318,4 +332,12 @@
    public int getLineCount() {
       return this.getChatHeight() / 9;
    }
+
+   public List<ChatLine> getDrawnChatLines() {
+      return drawnChatLines;
+   }
+
+   public List<ChatLine> getChatLines() {
+      return chatLines;
+   }
 }
